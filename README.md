# React Server Component

Next.js에서 리액트 서버 컴포넌트와 클라이언트 컴포넌트를 사용할 수 있다. app 경로에서 기본 적으로 모든 컴포넌트들은 서버 컴포넌트이다.

## Serialization이란?

Serialization(직렬화)는 객체가 파일 시스템, DB 또는 메모리에 저장될 수 있도록 하기 위해서 객체를 바이트 스트림으로 변환하는 과정이다.

메모리나 DB 파일시스템에 어떠한 것을 저장하기 위해서는 저장하고 싶은 것들을 바이트 스트림으로 유지해놓아야한다.

## 리액트 서버 컴포넌트란?

리액트 서버 컴포넌트들은 서버에서 렌더되고 요청되는 컴포넌트이다.
서버컴포넌트는 클라이언트 쪽의 번들에서 존재하지 않는다.

## 리액트 서버 컴포넌트의 특징

- 서버컴포넌트들은 onClick 같은 상호작용성을 포함하지 않는다.
- fallback과 함수들은 props들로써 전달될 수 없다.
- 서버 컴포넌트들은 상호작용 하지 않으며, 그들은 React State가 필요가 없다.
- 서버 컴포넌트들은 리액트 Life Cycle Hooks들을 사용하지 않는다.
- 리액트 컴포넌트들을 백엔드 부분이라고 생각하기 시작한다면 이해가 될 것이다.
- 데이터베이스나, 파일 시스템에 기반한 작업들이나, life cycle hooks들이나 상호작용성이 없는 다른 컴포넌트들이 리액트 서버 컴포넌트들의 예시이다.

## 서버 컴포넌트의 목적

서버 컴포넌트의 가장 큰 이점은, 서버컴포넌트는 클라이언트 사이드 번들을 포함하지 않는다. 이것은 적은 양의 클라이언트 사이드 번들을 우리가 전달할 수 있도록해서, 사용자가 적은 자바스크립트 코드를 다운로드 하도록 한다. 이것은 사용자가 핸드폰 데이터 요금제를 사용하거나, 인터넷이 불안정한 도시에서 앱을 사용할 때 큰 도움을 준다.

webpack 번들 파일을 확인했을 때 "use client"로 표시되는 컴포넌트들만 webpack 번들에 포함된다.

## 클라이언트 컴포넌트의 특징

- 클라이언트 컴포넌트들은 onClick 같은 상호작용성들을 포함한다.
- 클라이언트 컴포넌트들은 클라이언트라고 불리는 브라우저에서 렌더된다.
- 클라이언트 컴포넌트들은 "use client"라고 선언함으로써 그들이 클라이언트 컴포넌트인걸 나타낸다.
- 만약 useState, useEffect같은 리액틑 lifecycle hooks들을 사용할 계획이 있다면, 그들은 클라이언트 컴포넌트에서 사용해야한다.

## 리액트 서버 컴포넌트와 클라이언트 컴포넌트의 차이점

리액트 서버 컴포넌트들은 서버에서 렌더되고 fetch되는 반면에, 클라이언트 컴포넌트들은 클라이언트쪽에서 렌더되고 fetch 된다.

만약 lifecycle hooks를 포함하는 컴포넌트라면 그것을 클라이언트 컴포넌트로 만들고, 그렇지 않다면 서버 컴포넌트로 작성하자.

> useState나 useEffect를 사용하는 npm 패키지들은 어떻게 될 것인가? 서버 컴포넌트가 기본적으로 사용되기 때문에 사용되지 않는 것인가?

컴포넌트를 선언하는 곳이 중요하기 때문에 그렇지 않다.
예를들어서 클라이언트 컴포넌트로 작성된 패키지를 선언할 때는 "use client"로 선언된 컴포넌트 내부에 포함하면 잘 동작한다. 만약 "use client" 선언을 지운다면 서버 컴포넌트로 변하고, 에러가 발생할 것이다.
